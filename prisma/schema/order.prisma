model Order {
  id            String        @id @default(uuid())
  orderCode     String        @unique
  receiverName  String
  receiverPhone String
  status        OrderStatus   @default(PENDING)
  userId        String
  user          User          @relation(fields: [userId], references: [id], onDelete: Cascade)
  productId     String
  product       Product       @relation(fields: [productId], references: [id], onDelete: Restrict)
  deliveryDate  DateTime
  deliveryTime  DateTime
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
  orderAddress  OrderAddress?
  payment       Payment?

  @@map("orders")
}

model Payment {
  id                 String        @id @default(uuid())
  amount             Int
  status             PaymentStatus @default(UNPAID)
  transactionId      String        @unique
  paymentGatewayData Json?
  invoiceUrl         String?
  orderId            String        @unique
  order              Order         @relation(fields: [orderId], references: [id])
  createdAt          DateTime      @default(now())
  updatedAt          DateTime      @updatedAt

  @@map("payments")
}

model OrderAddress {
  id             String   @id @default(uuid())
  city           String
  country        String
  address_detail String
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  ordersId       String   @unique
  order          Order    @relation(fields: [ordersId], references: [id])

  @@map("order_addresses")
}
